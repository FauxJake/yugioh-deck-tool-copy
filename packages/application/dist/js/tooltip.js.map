{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../tooltip/node_modules/lodash-es/_freeGlobal.js","webpack:///../tooltip/src/inversify.config.ts","webpack:///../tooltip/src/types.ts","webpack:///../tooltip/src/tooltip/createCardTooltip.ts","webpack:///../tooltip/src/tooltip/bindReferenceLink.ts","webpack:///../tooltip/node_modules/lodash-es/isObject.js","webpack:///../tooltip/node_modules/lodash-es/_root.js","webpack:///../tooltip/node_modules/lodash-es/now.js","webpack:///../tooltip/node_modules/lodash-es/_Symbol.js","webpack:///../tooltip/node_modules/lodash-es/_getRawTag.js","webpack:///../tooltip/node_modules/lodash-es/_objectToString.js","webpack:///../tooltip/node_modules/lodash-es/_baseGetTag.js","webpack:///../tooltip/node_modules/lodash-es/isObjectLike.js","webpack:///../tooltip/node_modules/lodash-es/isSymbol.js","webpack:///../tooltip/node_modules/lodash-es/toNumber.js","webpack:///../tooltip/node_modules/lodash-es/debounce.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/enums.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/debounce.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/index.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getVariation.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/offset.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getBorders.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDecorations.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/flip.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/within.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/hide.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/popper.js","webpack:///../tooltip/src/tooltip/bindTooltip.ts","webpack:///../tooltip/src/main.ts","webpack:///../tooltip/node_modules/reflect-metadata/Reflect.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","freeGlobal","global","tooltipContainer","container","createChild","TOOLTIP_TYPES","assign","TYPES","priceService","PriceService","createElement","classes","type","element","document","forEach","className","classList","add","createDiv","children","child","appendChild","createSpan","textContent","createParagraph","createImg","src","createLoadingTooltip","createErrorTooltip","message","createMonsterStats","card","statsChildren","statImage","atk","def","linkVal","createSubType","subTypeChildren","group","CardTypeGroup","MONSTER","encodeURIComponent","attribute","race","createPrice","priceItems","vendor","DEFAULT_VENDOR_ARR","lookupResult","getPrice","missing","priceItem","id","formatPrice","price","currency","createDescription","desc","split","map","paragraph","createCardDetailsCol","primaryDetails","banlist","Format","TCG","SKILL","level","linkMarkers","join","createCardImageCol","cardImage","image","url","createCardTooltip","cardService","CardService","browserSupportsTouch","navigator","maxTouchPoints","bindReferenceLink","target","href","getReferenceLink","isObject","freeSelf","self","root","Function","now","Date","objectProto","nativeObjectToString","toString","symToStringTag","undefined","getRawTag","isOwn","tag","unmasked","e","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","replace","isBinary","test","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","this","getBoundingClientRect","rect","width","height","top","right","bottom","left","x","y","getWindow","node","ownerDocument","defaultView","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","getHTMLElementScroll","getNodeScroll","getNodeName","nodeName","toLowerCase","getDocumentElement","documentElement","getWindowScrollBarX","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","scroll","offsets","clientLeft","clientTop","getLayoutRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","getParentNode","assignedSlot","parentNode","host","getComputedStyle","getScrollParent","indexOf","body","_getComputedStyle","overflow","overflowX","overflowY","listScrollParents","list","scrollParent","isBody","concat","visualViewport","updatedList","isTableElement","getTrueOffsetParent","position","getOffsetParent","auto","basePlacements","start","end","viewport","variationPlacements","reduce","acc","placement","beforeRead","read","afterRead","beforeMain","afterMain","beforeWrite","write","afterWrite","modifierPhases","order","modifiers","Map","visited","Set","sort","modifier","requires","requiresIfExists","dep","has","depModifier","set","orderModifiers","orderedModifiers","phase","filter","fn","pending","Promise","resolve","then","mergeByName","merged","current","existing","keys","DEFAULT_OPTIONS","strategy","areValidElements","_len","Array","_key","some","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","reference","popper","state","modifiersData","elements","attributes","styles","effectCleanupFns","isDestroyed","instance","setOptions","cleanupModifierEffects","scrollParents","contextElement","enabled","runModifierEffects","update","forceUpdate","_state$elements","rects","reset","index","_state$orderedModifie","_state$orderedModifie2","_options","destroy","_ref3","_ref3$options","effect","cleanupFn","noopFn","onFirstUpdate","passive","_ref","_options$scroll","_options$resize","resize","addEventListener","removeEventListener","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","len","floor","ceil","unsetSides","roundOffsets","dpr","devicePixelRatio","round","mapToStyles","_ref2","_Object$assign2","popperRect","gpuAcceleration","adaptive","_roundOffsets","hasX","hasY","sideX","sideY","clientHeight","clientWidth","_Object$assign","commonStyles","transform","computeStyles","_options$gpuAccelerat","_options$adaptive","popperOffsets","arrow","applyStyles","style","removeAttribute","setAttribute","initialStyles","margin","styleProperties","distanceAndSkiddingToXY","offset","invertDistance","skidding","distance","_options$offset","_data$state$placement","hash","getOppositePlacement","matched","getOppositeVariationPlacement","getViewportRect","innerWidth","innerHeight","platform","getDocumentRect","winScroll","documentRect","cssValue","parseFloat","getBorders","computedStyle","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getDecorations","borders","isHTML","winScrollBarX","contains","parent","isShadow","Boolean","getRootNode","next","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","clippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","decorations","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","padding","altContext","referenceElement","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","axis","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","placements","overflows","a","b","getExpandedFallbackPlacements","oppositePlacement","flip","_skip","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","every","check","numberOfChecks","_loop","_i","fittingPlacement","find","_ret","getAltAxis","within","preventOverflow","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","tetherOffsetValue","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_mainSide","_altSide","_offset","_min","_max","_preventedOffset","_state$modifiersData$","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","center","axisProp","centerOffset","_options$element","querySelector","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","eventListeners","cardDatabase","CardDatabase","cardDataLoaderService","CardDataLoaderService","logger","tooltipContainerElement","tooltipElement","popperInstance","remove","tooltip","close","loadCard","async","prepareCard","cardKey","NAME","getCard","ID","Error","bindTooltipHandlers","context","openTooltip","trace","open","HTMLAnchorElement","updateViews","catch","warn","error","mouseOverHandler","event","dataset","mouseOutHandler","focusShiftedToTooltip","relatedTarget","Node","TOOLTIP_CONTAINER_ID","getLogger","getElementById","debug","Reflect","factory","exporter","makeExporter","previous","configurable","writable","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","getPrototypeOf","usePolyfill","process","_Map","entries","CreateMapPolyfill","_Set","CreateSetPolyfill","_WeakMap","WeakMap","CreateWeakMapPolyfill","Metadata","decorate","decorators","propertyKey","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","ToPropertyKey","DecorateProperty","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","delete","size","targetMetadata","decorated","descriptor","O","P","Create","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","ownKeys_1","hasKey","_a","parentKeys_1","keysObj","GetIterator","k","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","toString_2","argument","ToString","isArray","V","obj","method","iterResult","done","f","proto","prototypeProto","constructor","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","throw","return","_cacheKey","_cacheIndex","_find","clear","getKey","getValue","getEntry","insert","_","_map","UUID_SIZE","rootKey","CreateUniqueKey","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","byte","__"],"mappings":"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","file":"js/tooltip.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"tooltip\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import { container } from \"yugioh-deck-tool-core/src/main\";\nconst tooltipContainer = container.createChild();\nexport { tooltipContainer };\n","import { TYPES } from \"yugioh-deck-tool-core/src/main\";\nconst TOOLTIP_TYPES = Object.assign({}, TYPES);\nexport { TOOLTIP_TYPES };\n","import { CardTypeGroup, DEFAULT_VENDOR_ARR, Format, } from \"yugioh-deck-tool-core/src/main\";\nimport { tooltipContainer } from \"../inversify.config\";\nimport { TOOLTIP_TYPES } from \"../types\";\nconst priceService = tooltipContainer.get(TOOLTIP_TYPES.PriceService);\nconst createElement = (classes, type) => {\n    const element = document.createElement(type);\n    classes.forEach((className) => element.classList.add(className));\n    return element;\n};\nconst createDiv = (classes, children) => {\n    const element = createElement(classes, \"div\");\n    children.forEach((child) => element.appendChild(child));\n    return element;\n};\nconst createSpan = (classes, textContent) => {\n    const element = createElement(classes, \"span\");\n    element.textContent = textContent;\n    return element;\n};\nconst createParagraph = (classes, textContent) => {\n    const element = createElement(classes, \"p\");\n    element.textContent = textContent;\n    return element;\n};\nconst createImg = (classes, src) => {\n    const element = createElement(classes, \"img\");\n    element.src = src;\n    return element;\n};\nexport const createLoadingTooltip = () => createDiv([\"card-tooltip__content\", \"card-tooltip__content--loading\"], [\n    createDiv([\"card-tooltip__loading\"], [\n        createSpan([\"fas\", \"fa-spinner\", \"fa-spin\"], \"\"),\n        createSpan([], \"Loading...\"),\n    ]),\n]);\nexport const createErrorTooltip = (message) => createDiv([\"card-tooltip__content\", \"card-tooltip__content--error\"], [\n    createDiv([\"card-tooltip__error\"], [createSpan([\"fas\", \"fa-times\"], \"\"), createSpan([], message)]),\n]);\nconst createMonsterStats = (card) => {\n    const statsChildren = [];\n    const statImage = createImg([], \"https://ygoprodeck.com/wp-content/uploads/2017/01/atk.png\");\n    statsChildren.push(statImage);\n    if (card.atk != null) {\n        statsChildren.push(createSpan([], `ATK/ ${card.atk}`));\n    }\n    if (card.def != null) {\n        statsChildren.push(createSpan([], `DEF/ ${card.def}`));\n    }\n    else if (card.linkVal != null) {\n        statsChildren.push(createSpan([], `LINK-${card.linkVal}`));\n    }\n    return createDiv([\"card-tooltip__stats\"], statsChildren);\n};\nconst createSubType = (card) => {\n    const subTypeChildren = [];\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        subTypeChildren.push(createImg([], `https://ygoprodeck.com/pics/${encodeURIComponent(card.attribute)}.jpg`));\n        subTypeChildren.push(createSpan([], `Attribute: ${card.attribute}`));\n        subTypeChildren.push(createImg([], `https://ygoprodeck.com/pics/${encodeURIComponent(card.race)}.png`));\n        subTypeChildren.push(createSpan([], `Type: ${card.race}`));\n    }\n    else {\n        subTypeChildren.push(createImg([], `https://ygoprodeck.com/pics/icons/${encodeURIComponent(card.race)}.png`));\n        subTypeChildren.push(createSpan([], `Type: ${card.race}`));\n    }\n    return createDiv([\"card-tooltip__subtype\"], subTypeChildren);\n};\nconst createPrice = (card) => {\n    const priceItems = [];\n    for (const vendor of DEFAULT_VENDOR_ARR) {\n        const lookupResult = priceService.getPrice([card], vendor, null);\n        if (lookupResult.missing.length > 0) {\n            continue;\n        }\n        const priceItem = createSpan([\n            \"card-tooltip__price__vendor\",\n            `card-tooltip__price__vendor--${vendor.id}`,\n        ], `${vendor.name}: ${priceService.formatPrice(lookupResult.price, vendor.currency)}`);\n        priceItems.push(priceItem);\n    }\n    return createDiv([\"card-tooltip__price\"], priceItems);\n};\nconst createDescription = (card) => createDiv([\"card-tooltip__description\"], card.desc.split(\"\\n\").map((paragraph) => createParagraph([], paragraph)));\nconst createCardDetailsCol = (card) => {\n    const children = [];\n    const primaryDetails = createDiv([\"card-tooltip__details\"], [\n        createImg([], `https://ygoprodeck.com/pics/icons/${encodeURIComponent(card.type.name)}.jpg`),\n        createSpan([\"card-tooltip__name\"], card.name),\n        createImg([], `https://ygoprodeck.com/pics/icons/${encodeURIComponent(card.banlist[Format.TCG].name)}.png`),\n    ]);\n    children.push(primaryDetails);\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        children.push(createMonsterStats(card));\n    }\n    if (card.type.group !== CardTypeGroup.SKILL) {\n        children.push(createSubType(card));\n    }\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        if (card.level != null) {\n            const level = createDiv([\"card-tooltip__level\"], [\n                createImg([], \"https://ygoprodeck.com/wp-content/uploads/2017/01/level.png\"),\n                createSpan([], `Level/Rank: ${card.level}`),\n            ]);\n            children.push(level);\n        }\n        else if (card.linkMarkers != null) {\n            const linkMarkers = createDiv([\"card-tooltip__link-markers\"], [\n                createImg([], \"https://ygoprodeck.com/wp-content/uploads/2019/04/link-arrow-right.png\"),\n                createSpan([], `Link Markers: ${card.linkMarkers.join(\", \")}`),\n            ]);\n            children.push(linkMarkers);\n        }\n    }\n    children.push(createDescription(card));\n    children.push(createPrice(card));\n    return createDiv([\"card-tooltip__details__col\"], children);\n};\nconst createCardImageCol = (card) => {\n    const cardImage = createImg([\"card-tooltip__image\"], card.image?.url ?? \"#\");\n    return createDiv([\"card-tooltip__image__col\"], [cardImage]);\n};\nexport const createCardTooltip = (card) => createDiv([\"card-tooltip\"], [\n    createDiv([\"card-tooltip__content\"], [createCardDetailsCol(card), createCardImageCol(card)]),\n]);\n","import { tooltipContainer } from \"../inversify.config\";\nimport { TOOLTIP_TYPES } from \"../types\";\nconst cardService = tooltipContainer.get(TOOLTIP_TYPES.CardService);\nconst browserSupportsTouch = () => navigator.maxTouchPoints > 0;\nexport const bindReferenceLink = (target, card) => {\n    if (!browserSupportsTouch() && // On touch devices binding a link causes issues with tooltips.\n        target.href.length === 0 // If a link is set already, do not bind one.\n    ) {\n        target.href = cardService.getReferenceLink(card);\n        target.target = \"_blank\";\n    }\n};\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","export default function getBoundingClientRect(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top\n  };\n}","/*:: import type { Window } from '../types'; */\n\n/*:: declare function getWindow(node: Node | Window): Window; */\nexport default function getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getWindow from \"./getWindow.js\";\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nexport { isElement, isHTMLElement };","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe: assume body is always available\n  return (isElement(element) ? element.ownerDocument : element.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\"; // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var documentElement;\n  var rect = getBoundingClientRect(elementOrVirtualElement);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (!isFixed) {\n    if (getNodeName(offsetParent) !== 'body') {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement = getDocumentElement(offsetParent)) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default function getLayoutRect(element) {\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// $FlowFixMe: this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    // $FlowFixMe: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getParentNode from \"./getParentNode.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    var _getComputedStyle = getComputedStyle(node),\n        overflow = _getComputedStyle.overflow,\n        overflowX = _getComputedStyle.overflowX,\n        overflowY = _getComputedStyle.overflowY;\n\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nexport default function listScrollParents(element, list) {\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = getNodeName(scrollParent) === 'body';\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element); // Find the nearest non-table offsetParent\n\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static') {\n    return window;\n  }\n\n  return offsetParent || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, {}, current, {\n      options: Object.assign({}, existing.options, {}, current.options),\n      data: Object.assign({}, existing.data, {}, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nexport * from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, {}, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(options) {\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, {}, state.options, {}, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator();","import getWindow from \"../dom-utils/getWindow.js\";\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) - Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) + Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import { top, left, right, bottom } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsets(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: Math.round(x * dpr) / dpr || 0,\n    y: Math.round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive;\n\n  var _roundOffsets = roundOffsets(offsets),\n      x = _roundOffsets.x,\n      y = _roundOffsets.y;\n\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n    } // $FlowFixMe: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n    /*:: offsetParent = (offsetParent: Element); */\n\n\n    if (placement === top) {\n      sideY = bottom;\n      y -= offsetParent.clientHeight - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left) {\n      sideX = right;\n      x -= offsetParent.clientWidth - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) < 2 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref3) {\n  var state = _ref3.state,\n      options = _ref3.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      } // Flow doesn't support to extend this property, but it's the most\n      // effective way to apply styles to an HTMLElement\n      // $FlowFixMe\n\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\";\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var visualViewport = win.visualViewport;\n  var width = win.innerWidth;\n  var height = win.innerHeight; // We don't know which browsers have buggy or odd implementations of this, so\n  // for now we're only applying it to iOS to fix the keyboard issue.\n  // Investigation required\n\n  if (visualViewport && /iPhone|iPod|iPad/.test(navigator.platform)) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: 0,\n    y: 0\n  };\n}","import getCompositeRect from \"./getCompositeRect.js\";\nimport getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getDocumentRect(element) {\n  var win = getWindow(element);\n  var winScroll = getWindowScroll(element);\n  var documentRect = getCompositeRect(getDocumentElement(element), win);\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n  return documentRect;\n}","import getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\n\nfunction toNumber(cssValue) {\n  return parseFloat(cssValue) || 0;\n}\n\nexport default function getBorders(element) {\n  var computedStyle = isHTMLElement(element) ? getComputedStyle(element) : {};\n  return {\n    top: toNumber(computedStyle.borderTopWidth),\n    right: toNumber(computedStyle.borderRightWidth),\n    bottom: toNumber(computedStyle.borderBottomWidth),\n    left: toNumber(computedStyle.borderLeftWidth)\n  };\n}","import getBorders from \"./getBorders.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\"; // Borders + scrollbars\n\nexport default function getDecorations(element) {\n  var win = getWindow(element);\n  var borders = getBorders(element);\n  var isHTML = getNodeName(element) === 'html';\n  var winScrollBarX = getWindowScrollBarX(element);\n  var x = element.clientWidth + borders.right;\n  var y = element.clientHeight + borders.bottom; // HACK:\n  // document.documentElement.clientHeight on iOS reports the height of the\n  // viewport including the bottom bar, even if the bottom bar isn't visible.\n  // If the difference between window innerHeight and html clientHeight is more\n  // than 50, we assume it's a mobile bottom bar and ignore scrollbars.\n  // * A 50px thick scrollbar is likely non-existent (macOS is 15px and Windows\n  //   is about 17px)\n  // * The mobile bar is 114px tall\n\n  if (isHTML && win.innerHeight - element.clientHeight > 50) {\n    y = win.innerHeight - borders.bottom;\n  }\n\n  return {\n    top: isHTML ? 0 : element.clientTop,\n    right: // RTL scrollbar (scrolling containers only)\n    element.clientLeft > borders.left ? borders.right : // LTR scrollbar\n    isHTML ? win.innerWidth - x - winScrollBarX : element.offsetWidth - x,\n    bottom: isHTML ? win.innerHeight - y : element.offsetHeight - y,\n    left: isHTML ? winScrollBarX : element.clientLeft\n  };\n}","export default function contains(parent, child) {\n  // $FlowFixMe: hasOwnProperty doesn't seem to work in tests\n  var isShadow = Boolean(child.getRootNode && child.getRootNode().host); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (isShadow) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDecorations from \"./getDecorations.js\";\nimport contains from \"./contains.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isHTMLElement(clippingParent) ? getBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(element);\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement);\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    var decorations = getDecorations(isHTMLElement(clippingParent) ? clippingParent : getDocumentElement(element));\n    accRect.top = Math.max(rect.top + decorations.top, accRect.top);\n    accRect.right = Math.min(rect.right - decorations.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom - decorations.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left + decorations.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), {}, paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\";\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var referenceElement = state.elements.reference;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(referenceElement);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, {}, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\n\n/*:: type OverflowsMap = { [ComputedPlacement]: number }; */\n\n/*;; type OverflowsMap = { [key in ComputedPlacement]: number }; */\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = (variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements).filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  }); // $FlowFixMe: Flow seems to have problems with two array unions...\n\n  var overflows = placements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\";\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [overflow[_basePlacement] <= 0, overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0];\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","export default function within(min, value, max) {\n  return Math.max(min, Math.min(value, max));\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport within from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = popperOffsets[mainAxis] + overflow[mainSide];\n    var max = popperOffsets[mainAxis] - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - tetherOffsetValue : minLen - arrowLen - arrowPaddingMin - tetherOffsetValue;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + tetherOffsetValue : maxLen + arrowLen + arrowPaddingMax + tetherOffsetValue;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = state.modifiersData.offset ? state.modifiersData.offset[state.placement][mainAxis] : 0;\n    var tetherMin = popperOffsets[mainAxis] + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = popperOffsets[mainAxis] + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? Math.min(min, tetherMin) : min, offset, tether ? Math.max(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var _preventedOffset = within(_min, _offset, _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport within from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = state.modifiersData[name + \"#persistent\"].padding;\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element,\n      _options$padding = options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n  state.modifiersData[name + \"#persistent\"] = {\n    padding: mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements))\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator } from \"./index.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { tooltipContainer } from \"../inversify.config\";\nimport {\n    Card,\n    CardDatabase,\n    CardDataLoaderService,\n    FindCardBy,\n    getLogger,\n} from \"yugioh-deck-tool-core/src/main\";\nimport { TOOLTIP_TYPES } from \"../types\";\nimport {\n    createCardTooltip,\n    createErrorTooltip,\n    createLoadingTooltip,\n} from \"./createCardTooltip\";\nimport { bindReferenceLink } from \"./bindReferenceLink\";\nimport { debounce } from \"lodash\";\nimport { createPopper, Instance } from \"@popperjs/core\";\n\nconst cardDatabase = tooltipContainer.get<CardDatabase>(\n    TOOLTIP_TYPES.CardDatabase\n);\n\nconst cardDataLoaderService = tooltipContainer.get<CardDataLoaderService>(\n    TOOLTIP_TYPES.CardDataLoaderService\n);\n\nconst logger = getLogger(\"bindTooltip\");\n\nclass CardTooltip {\n    private tooltipElement: HTMLElement | null;\n    private popperInstance: Instance | null;\n\n    constructor(private readonly tooltipContainerElement: HTMLElement) {\n        this.tooltipElement = null;\n        this.popperInstance = null;\n    }\n\n    public close(): void {\n        if (this.tooltipElement != null) {\n            this.tooltipElement.remove();\n            this.popperInstance?.destroy();\n        }\n    }\n\n    public open(target: HTMLElement, tooltip: HTMLElement): void {\n        this.close();\n        this.tooltipElement = tooltip;\n        this.popperInstance = createPopper(target, this.tooltipElement, {\n            placement: \"auto\",\n        });\n        this.tooltipContainerElement.appendChild(this.tooltipElement);\n    }\n}\n\nconst loadCard = async (cardKey: string): Promise<Card> => {\n    await cardDatabase.prepareCard(cardKey, FindCardBy.NAME);\n    let card = cardDatabase.getCard(cardKey, FindCardBy.NAME);\n    if (card != null) {\n        return card;\n    }\n    await cardDatabase.prepareCard(cardKey, FindCardBy.ID);\n    card = cardDatabase.getCard(cardKey, FindCardBy.ID);\n    if (card != null) {\n        return card;\n    }\n    throw new Error(`Could not find card '${cardKey}'.`);\n};\n\nexport const bindTooltipHandlers = (\n    context: HTMLElement,\n    tooltipContainerElement: HTMLElement\n): void => {\n    const tooltip = new CardTooltip(tooltipContainerElement);\n\n    const openTooltip = (target: HTMLElement, cardKey: string): void => {\n        logger.trace(`Attempting to show tooltip for '${cardKey}'.`);\n        tooltip.open(target, createLoadingTooltip());\n        loadCard(cardKey)\n            .then((card) => {\n                logger.trace(\"Loaded card.\", card);\n                tooltip.open(target, createCardTooltip(card));\n                if (target instanceof HTMLAnchorElement) {\n                    bindReferenceLink(target, card);\n                }\n                // Start request, but do not wait for it to finish.\n                cardDataLoaderService\n                    .updateViews(card)\n                    .then(() => logger.trace(\"Updated view count.\"))\n                    .catch((e) =>\n                        logger.warn(\"Could not update view count.\", e)\n                    );\n            })\n            .catch((e) => {\n                tooltip.open(\n                    target,\n                    createErrorTooltip(\"Error while loading card.\")\n                );\n                logger.error(\"Error while loading card.\", e);\n            });\n    };\n\n    const mouseOverHandler = (event: MouseEvent): void => {\n        const target = event.target;\n        if (target instanceof HTMLElement) {\n            const cardKey = target.dataset[\"name\"];\n            if (cardKey != null) {\n                openTooltip(target, cardKey);\n            }\n        }\n    };\n\n    const mouseOutHandler = (event: MouseEvent): void => {\n        const focusShiftedToTooltip =\n            event.relatedTarget instanceof Node &&\n            tooltipContainerElement.contains(event.relatedTarget);\n        // We do not wanna hide the tooltip of the focus shifted to the tooltip.\n        if (!focusShiftedToTooltip) {\n            tooltip.close();\n        }\n    };\n\n    context.addEventListener(\"mouseover\", debounce(mouseOverHandler, 200));\n    context.addEventListener(\"mouseout\", mouseOutHandler);\n};\n","import \"reflect-metadata\";\nimport { bindTooltipHandlers } from \"./tooltip/bindTooltip\";\nimport \"./styles/tooltip.scss\";\nimport { getLogger } from \"yugioh-deck-tool-core/src/main\";\nconst TOOLTIP_CONTAINER_ID = \"cardTooltipContainer\";\nconst logger = getLogger(\"tooltip\");\ndocument.addEventListener(\"readystatechange\", () => {\n    if (document.getElementById(TOOLTIP_CONTAINER_ID) == null) {\n        logger.debug(\"Setting up card tooltip.\");\n        const context = document.body;\n        const tooltipContainerElement = document.createElement(\"div\");\n        tooltipContainerElement.id = TOOLTIP_CONTAINER_ID;\n        context.appendChild(tooltipContainerElement);\n        bindTooltipHandlers(context, tooltipContainerElement);\n    }\n});\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n"],"sourceRoot":""}